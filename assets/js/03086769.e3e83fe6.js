"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[5374],{8453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>r});var c=n(6540);const s={},l=c.createContext(s);function d(e){const t=c.useContext(l);return c.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),c.createElement(l.Provider,{value:t},e.children)}},8907:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>a,frontMatter:()=>d,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/kubernetes/k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743/Etcd","title":"etcd","description":"|\u4f5c\u8005|\u4fee\u8ba2\u65f6\u95f4|","source":"@site/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/01.\u6e17\u900f\u6d4b\u8bd5/04.\u5185\u7f51\u6e17\u900f/02.kubernetes/03.k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743/02.Etcd.md","sourceDirName":"\u4e2a\u4eba\u77e5\u8bc6\u5e93/01.\u6e17\u900f\u6d4b\u8bd5/04.\u5185\u7f51\u6e17\u900f/02.kubernetes/03.k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743","slug":"/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/kubernetes/k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743/Etcd","permalink":"/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/kubernetes/k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743/Etcd","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/01.\u6e17\u900f\u6d4b\u8bd5/04.\u5185\u7f51\u6e17\u900f/02.kubernetes/03.k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743/02.Etcd.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Apiserver","permalink":"/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/kubernetes/k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743/ApiServer"},"next":{"title":"Kubelet","permalink":"/docs/\u4e2a\u4eba\u77e5\u8bc6\u5e93/\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/kubernetes/k8s\u4e0b\u7684\u5404\u79cd\u672a\u6388\u6743/Kubelet"}}');var s=n(4848),l=n(8453);const d={},r="etcd",i={},o=[{value:"\u5229\u7528",id:"\u5229\u7528",level:2}];function h(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"etcd",children:"etcd"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u4f5c\u8005"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u4fee\u8ba2\u65f6\u95f4"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.img,{src:"https://img.shields.io/badge/wjlin0-%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93-green",alt:"wjlin0"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"2025-10-15 00:33:16"})]})})]}),"\n",(0,s.jsx)(t.p,{children:"etcd \u662f\u4e00\u79cd\u5206\u5e03\u5f0f\u952e\u503c\u5b58\u50a8\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u53ef\u9760\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u534f\u8c03\u72b6\u6001\u3002etcd \u4e8e 2013 \u5e74 6 \u6708\u7531 CoreOS\uff08\u81ea 2018 \u5e74\u8d77\u6210\u4e3a Red Hat \u7684\u4e00\u90e8\u5206\uff09\u9996\u6b21\u53d1\u5e03\u3002\u81ea 2014 \u5e74\u5728 Kubernetes \u4e2d\u91c7\u7528\u4ee5\u6765\uff0cetcd \u5df2\u6210\u4e3a Kubernetes \u96c6\u7fa4\u7ba1\u7406\u8f6f\u4ef6\u8bbe\u8ba1\u7684\u57fa\u672c\u7ec4\u6210\u90e8\u5206\uff0c\u5e76\u4e14 etcd \u793e\u533a\u5448\u6307\u6570\u7ea7\u589e\u957f\u3002etcd \u76ee\u524d\u5df2\u5728\u591a\u5bb6\u516c\u53f8\u7684\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u5305\u62ec AWS\u3001Google Cloud Platform\u3001Azure \u7b49\u5927\u578b\u4e91\u63d0\u4f9b\u5546\u73af\u5883\u4ee5\u53ca\u5176\u4ed6\u672c\u5730 Kubernetes \u5b9e\u65bd\u3002"}),"\n",(0,s.jsxs)(t.p,{children:["\u518d ",(0,s.jsx)(t.code,{children:"kubernetes"})," \u4e2d\uff0c\u9ed8\u8ba4\u4f7f\u7528",(0,s.jsx)(t.code,{children:"etcd v3"})," \u6765\u5b58\u50a8\u6570\u636e\uff0c\u5982\u679c\u6211\u4eec\u80fd\u591f\u63a7\u5236",(0,s.jsx)(t.code,{children:"etcd\u670d\u52a1"}),", \u4e5f\u5c31\u62e5\u6709\u4e86\u6574\u4e2a\u96c6\u7fa4\u7684\u63a7\u5236\u6743"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:'CTL_ENDPOINTS="http://192.168.3.105:2379/"\netcdctl getexport ETCDCTL_API=3\nexport ETCD\nCTL_ENDPOINTS="http://192.168.3.105:2379/"\netcdctl get / --prefix --keys-only \n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.wjlin0.com/img/202307080046934.png",alt:"image-20230708004633573"})}),"\n",(0,s.jsx)(t.h2,{id:"\u5229\u7528",children:"\u5229\u7528"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"etcd"})," \u4e5f\u5b58\u5728 ",(0,s.jsx)(t.code,{children:"api"})," \u548c \u547d\u4ee4\u884c\u4e24\u79cd\u6a21\u5f0f\uff0c\u8fd9\u91cc\u4ee5 ",(0,s.jsx)(t.code,{children:"etcdctl"})," \u5229\u7528\u4e3a\u4e3b"]}),"\n",(0,s.jsx)(t.p,{children:"\u4ee5\u4e0b\u7ed3\u679c\u5373\u5b58\u5728\u672a\u6388\u6743"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-curl",children:'curl http://192.168.3.105:2379/version # -> {"etcdserver":"3.4.3","etcdcluster":"3.4.0"}\n# \u6216\u8005\ncurl http://192.168.3.105:2380/version # -> {"etcdserver":"3.4.3","etcdcluster":"3.4.0"}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7",(0,s.jsx)(t.code,{children:"etcdctl"})," \u547d\u4ee4\u884c\u5de5\u5177\u8fd0\u884c\u67e5\u8be2",(0,s.jsx)(t.code,{children:"token"}),"\u952e"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"curl -LO https://github.com/etcd-io/etcd/releases/download/v3.5.9/etcd-v3.5.9-linux-amd64.tar.gz \ntar xvf etcd-v3.5.9-linux-amd64.tar.gz && ln -s ./etcd-v3.5.9-linux-amd64/etcdctl /usr/bin/etcdctl\netcdctl -h\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.wjlin0.com/img/202307080058495.png",alt:"image-20230708005803211"})}),"\n",(0,s.jsx)(t.p,{children:"\u83b7\u53d6\u6240\u6709\u5e26token\u952e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:'etcdctl --endpoints "http://192.168.3.105:2379/" get / --prefix --keys-only | grep token # linux\netcdctl --endpoints "http://192.168.3.105:2379/" get / --prefix --keys-only | findstr token # windows\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.wjlin0.com/img/202307080105575.png",alt:"image-20230708010507545"})}),"\n",(0,s.jsxs)(t.p,{children:["\u83b7\u53d6",(0,s.jsx)(t.code,{children:"token"}),"\u503c"]}),"\n",(0,s.jsxs)(t.p,{children:["\u200b\t",(0,s.jsx)(t.img,{src:"https://cdn.wjlin0.com/img/202307080106689.png",alt:"image-20230708010605095"})]}),"\n",(0,s.jsxs)(t.p,{children:["\u6700\u540e\u901a\u8fc7",(0,s.jsx)(t.code,{children:"kubectl"})," \u5229\u7528\u5373\u53ef"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:'kubectl get po -A -s "https://192.168.3.105:6443" --token eyJhbGciOiJSUzI1NiIsImtpZCI6IlVxV2xjZ09VU1dJUEJGSzRPWmp3RFk2Q0lMdHpJWEFpSmpsTHNaRmtvNmMifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJuYW1lc3BhY2UtY29udHJvbGxlci10b2tlbi1jc3p6cCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJuYW1lc3BhY2UtY29udHJvbGxlciIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjVlY2Y2N2JkLTJiZGMtNGNkYS1hMTljLTFjNTQ0Mzc1ZWI3YiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpuYW1lc3BhY2UtY29udHJvbGxlciJ9.NyGdUVNba_XPyRnxRgjFKHpzPhzMOTFtkv1zG1EvN-982pN9P4WYLk-XrmFfEz--kt1LyFXujjQTr9gCL7g-OdW10IXo8_WRFmaM_V7FcOhPWxNNeY9WNMpcGdZ1VmIjOLln1lC8VVXJyt8YFFcTnc9sfZpj_Bc_d1L_RqUdu9IDtEZhN3ZQqdMbix__IdmJTnS9M2d_h6sl2ZlxpqeULJ86PkfvTMkRfuBTIuGNG2adFhe72eQjAK6xCk9liIJnaRDxRVADMKGw2RDykoCo8SvDx8fdi2Vv_EAofihw5zZz4YHro6mkCLclB725kCDonVHOUZncZcK4HtQHhhP5YQ --insecure-skip-tls-verify\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://cdn.wjlin0.com/img/202307080139621.png",alt:"image-20230708013804383"})})]})}function a(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);